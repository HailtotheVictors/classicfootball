const colors=["(109, 16, 20)","(197, 16, 26)","(249, 100, 16)","(255, 203, 5)","(159, 205, 22)","(84, 133, 182)","(0, 39, 76)","(47, 21, 189)","(185, 106, 189)","(117, 42, 117)","(235, 16, 154)","(138, 86, 57)","(136, 136, 136)","(16, 16, 16)"],darkColors=["(93, 0, 4)","(181, 0, 10)","(233, 84, 0)","(239, 187, 0)","(143, 189, 0)","(68, 117, 166)","(0, 23, 60)","(31, 5, 173)","(169, 90, 173)","(101, 26, 101)","(219, 0, 138)","(122, 70, 41)","(120, 120, 120)","(0, 0, 0)"];var down=1,toGo=10,lineofScrimm=25,homeScore=0,awayScore=0,poss="home",playClock=7,periodLength=300,gameClock=300,updatePlayClock=-1,updateGameClock=-1,audio=!1,awayColor=!1,homeColor=!1;const fieldColor="rgb(0, 153, 0)";var gameGoing=!1,gameActive=!1;const awayDefenders=[26,25,24,16,7],homeDefenders=[9,10,11,19,28];var moveTackles,awayDefpos=[26,25,24,16,7],homeDefpos=[9,10,11,19,28],rbpos=34,homeTOL=3,awayTOL=3,homeName="HOME TEAM",awayName="AWAY TEAM",activeTimeout=!1,firstMove=!0,amountMoved=0,adjustment=0,pat=!1,goal=!1,quarter=1,overtime=!1,defenderInterval=500,mousedownID=-1;const dpadElems=["topDpad","leftDpad","botDpad","rightDpad"],dpadDx=[0,-1,0,1],dpadDy=[-1,0,1,0];var controlStyle=0;const diagrams=["KeyboardControls","LeftControlsMod","RightControlsMod"];function touchback(){"home"==poss&&0==overtime?changePoss(-25):"away"==poss&&0==overtime?changePoss(25):"home"==poss&&0==overtime?changePoss(25):"away"==poss&&0==overtime&&changePoss(-25)}function clearPlayClock(){clearInterval(updatePlayClock),updatePlayClock=-1}function safePlayClock(){-1==updatePlayClock&&runPlayClock()}function clearGameClock(){clearInterval(updateGameClock),updateGameClock=-1}function safeGameClock(){-1==updateGameClock&&runGameClock()}function advance(){document.getElementById("setupCont").style.display="none",document.getElementById("explainControls").style.display="block"}function blink(e){var o=0,t=setInterval(function(){o%2==0?e.style.backgroundColor=fieldColor:o%2==1&&"home"==poss?e.style.backgroundColor=awayColor:o%2==1&&"away"==poss&&(e.style.backgroundColor=homeColor),3==o&&clearInterval(t),o++},300)}function mousedown(e,o,t){whilemousedown(o,t),-1==mousedownID&&(mousedownID=setInterval(function(){whilemousedown(o,t)},100))}function mouseup(e,o,t){-1!=mousedownID&&(clearInterval(mousedownID),mousedownID=-1)}function whilemousedown(e,o){1==gameGoing&&moveRB(e,o)}function setup(){for(var e=0;e<dpadElems.length;e++)!function(e){document.getElementById(dpadElems[e]).addEventListener("touchstart",function(){mousedown(event,dpadDx[e],dpadDy[e])}),document.getElementById(dpadElems[e]).addEventListener("touchend",function(){mouseup(event,dpadDx[e],dpadDy[e])})}(e)}function chooseControls(e){var o=document.getElementsByClassName("boxControl");o[controlStyle].classList.remove("selectedBox"),o[e].classList.add("selectedBox"),controlStyle=e;var t=document.getElementById("gameCont"),l=document.getElementById("fullDpad"),n=document.getElementById("awayTimeout"),a=document.getElementById("homeTimeout"),s=document.getElementById("awayControls"),r=document.getElementById("homeControls"),c=document.getElementById("awayMethod"),m=document.getElementById("homeMethod");document.getElementById("controlDiagram").src=diagrams[e]+".png",0==e?(toDesktop(),t.style.width="100vw",t.style.left="0px",l.style.display="none",n.style.display="none",a.style.display="none",s.innerHTML="- WASD to move",c.innerHTML="- T to call a timeout",r.innerHTML="- IJKL to move",m.innerHTML="- P to call a timeout"):(toMobile(),s.innerHTML="- D-pad to move",c.innerHTML="- Double click TO to call a timeout",r.innerHTML="- D-pad to move",m.innerHTML="- Double click TO to call a timeout",t.style.width="calc(100vw - 260px)",l.style.display="block",n.style.display="block",a.style.display="block",1==e?(n.style.right="",a.style.right="",n.style.left="53px",a.style.left="157px",l.style.right="",l.style.left="55px",t.style.left="260px"):(n.style.left="",a.style.left="",n.style.right="157px",a.style.right="53px",l.style.left="",l.style.right="55px",t.style.left="0px"))}function toMobile(){document.getElementById("scoreboard").classList.add("scoreboardMobile"),document.getElementById("yardLine").classList.add("yardLineMobile"),document.getElementById("field").classList.add("fieldMobile"),document.getElementById("fieldCont").classList.add("fieldContMobile"),document.getElementById("scoring").classList.add("scoringMobile");for(var e=document.getElementsByClassName("messageBox"),o=0;o<e.length;o++)e[o].classList.add("messageBoxMobile")}function toDesktop(){document.getElementById("scoreboard").classList.remove("scoreboardMobile"),document.getElementById("yardLine").classList.remove("yardLineMobile"),document.getElementById("field").classList.remove("fieldMobile"),document.getElementById("fieldCont").classList.remove("fieldContMobile"),document.getElementById("scoring").classList.remove("scoringMobile");for(var e=document.getElementsByClassName("messageBox"),o=0;o<e.length;o++)e[o].classList.remove("messageBoxMobile")}function setDifficulty(e){for(var o=document.getElementsByClassName("boxLevel"),t=0;t<o.length;t++)o[t].classList.remove("selectedBox");o[3-e].classList.add("selectedBox"),0==(defenderInterval=250*e)&&(defenderInterval=125)}function confirmTeam(e){var o=document.getElementsByClassName("nameInput"),t=document.getElementsByClassName("error"),l=document.getElementsByClassName("veil"),n=document.getElementsByClassName("teamName"),a=o[e].value;a.length>8?t[e].innerHTML="Team name cannot be longer than 8 characters.":0!=a?0==e&&0==awayColor||1==e&&0==homeColor?t[e].innerHTML="Please choose a color.":homeColor!=awayColor?o[0].value.toUpperCase()!=o[1].value.toUpperCase()?(t[e].innerHTML="",n[e].innerHTML=o[e].value.toUpperCase(),0==e?(l[0].style.display="block",l[1].style.display="none",awayName=o[e].value.toUpperCase()):1==e&&(l[1].style.display="block",document.getElementById("botVeil").style.display="none",homeName=o[e].value.toUpperCase())):t[e].innerHTML="Please choose a different name.":t[e].innerHTML="Please pick a different color.":t[e].innerHTML="Please enter a team name."}function chooseColor(e,o){var t,l=document.getElementsByClassName("colorCircle"),n=document.getElementsByClassName("teamScore"),a=document.getElementsByClassName("finalScore"),s=document.getElementsByClassName("teamName");"a"==e?(t=0,awayColor="rgb"+colors[o],document.getElementById("awayTimeout").style.backgroundColor=awayColor):(t=1,homeColor="rgb"+colors[o],document.getElementById("homeTimeout").style.backgroundColor=homeColor),n[t].style.backgroundColor="rgb"+darkColors[o],a[t].style.backgroundColor="rgb"+darkColors[o],s[t].style.backgroundColor="rgb"+colors[o];for(var r=0;r<15;r++)l[r+15*t].classList.remove("colorHighlight");l[15*t+o].classList.add("colorHighlight")}function launchOvertime(){quarter++,down=1,toGo=10,document.getElementById("message").style.display="none",document.getElementById("messOvertime").style.display="none",document.getElementById("messDoubleOvertime").style.display="none",document.getElementById("messTripleOvertime").style.display="none",document.getElementById("period").innerHTML=ordinal(quarter),document.getElementById("gameClock").innerHTML="",poss="away",overtime=!0,changePoss(-25),gameGoing=!0,gameClock=4,updateDownDisplay(),safePlayClock()}function twoPoint(){document.getElementById("message").style.display="none",document.getElementById("messTD").style.display="none",document.getElementById("downBox").innerHTML="2 PT ATT",lineofScrimm="home"==poss?-45:45,pat=!0,resetField(),gameGoing=!0}function extrapoint(){document.getElementById("message").style.display="none",document.getElementById("messTD").style.display="none","home"==poss&&0==overtime?score("h",1,!1):"away"==poss&&0==overtime?score("a",1,!1):"home"==poss&&1==overtime?score("h",1,!1):"away"==poss&&1==overtime&&score("a",1,!1),touchback(),gameGoing=!0,clearPlayClock(),clearGameClock(),safeGameClock(),safePlayClock(),updateDownDisplay()}function goforit(){document.getElementById("message").style.display="none",document.getElementById("messFourth").style.display="none",resetforFourth(),safeGameClock(),safePlayClock()}function fieldGoalChance(e){var o;o="home"==poss?Math.abs(50+e):Math.abs(50-e);var t=-.04*Math.pow(o,2)+100;return t<0&&(t=0),t.toFixed(1)}function moveDefenders(){moveTackles=setInterval(function(){var e,o,t,l,n,a=document.getElementsByClassName("cell");amountMoved<=6?(e=Math.floor(3*Math.random()),o="home"==poss?2:3):(e=Math.floor(5*Math.random()),o=Math.floor(4*Math.random())),0==o?(t=0,l=1):1==o?(t=0,l=-1):2==o?(t=1,l=0):3==o&&(t=-1,l=0);var s=cellTocoord(n="home"==poss?awayDefpos[e]:homeDefpos[e]).x+t;(s<0||s>11)&&(s=cellTocoord(n).x-t);var r=cellTocoord(n).y+l;(r<0||r>2)&&(r=cellTocoord(n).y-l);var c=coordTocell(s,r),m=a[c].style.backgroundColor;m==awayColor&&"home"==poss||m==homeColor&&"away"==poss||(m==awayColor&&"away"==poss||m==homeColor&&"home"==poss?0==pat?(tackled(),blink(a[n])):(blink(a[n]),firstMove=!0,gameGoing=!1,clearInterval(moveTackles),document.getElementById("downBox").innerHTML="NO GOOD",setTimeout(function(){touchback(),gameGoing=!0,pat=!1,clearPlayClock(),resetPlayClock(),updateDownDisplay()},2e3)):(a[n].style.backgroundColor=fieldColor,"home"==poss?(a[c].style.backgroundColor=awayColor,awayDefpos[e]=c):(a[c].style.backgroundColor=homeColor,homeDefpos[e]=c))),amountMoved++},defenderInterval)}function timeout(e){if(gameClock>0){clearGameClock(),clearPlayClock(),activeTimeout=!0,gameGoing=!1;var o=document.getElementsByClassName("timeout"),t=document.getElementsByClassName("teamName");"h"==e?(o[2+homeTOL].style.visibility="hidden",t[1].innerHTML="TIMEOUT",setTimeout(function(){t[1].innerHTML=homeName},5e3),homeTOL--):(o[awayTOL-1].style.visibility="hidden",t[0].innerHTML="TIMEOUT",setTimeout(function(){t[0].innerHTML=awayName},5e3),awayTOL--),setTimeout(function(){playClock=7,document.getElementById("playClock").innerHTML="7",safePlayClock(),gameGoing=!0,activeTimeout=!1},5e3)}}function moveRB(e,o){1==firstMove&&(clearGameClock(),0==overtime&&safeGameClock(),moveDefenders(),firstMove=!1),gameActive=!0,clearPlayClock();var t=document.getElementsByClassName("cell"),l=cellTocoord(rbpos).x+e;if(l<0&&"home"==poss?(l=11,lineofScrimm-=12,adjustment+=12,t[coordTocell(11,cellTocoord(rbpos).y)].style.backgroundColor==fieldColor&&updateFieldPos()):l>11&&"away"==poss&&(l=0,lineofScrimm+=12,adjustment+=12,t[coordTocell(0,cellTocoord(rbpos).y)].style.backgroundColor==fieldColor&&updateFieldPos()),cellTocoord(rbpos).y+o<=2&&cellTocoord(rbpos).y+o>=0){var n=coordTocell(l,cellTocoord(rbpos).y+o),a=t[n].style.backgroundColor,s=document.getElementsByClassName("lineCell");"home"==poss&&a==fieldColor?(t[n].style.backgroundColor=homeColor,t[rbpos].style.backgroundColor=fieldColor,"G"==s[cellTocoord(rbpos=n).x].innerHTML&&0==pat?(score("h",6,!1),rbpos=34,onScore()):"G"==s[cellTocoord(rbpos).x].innerHTML&&1==pat&&(c,score("h",2,!1),clearInterval(moveTackles),gameGoing=!1,firstMove=!0,pat=!1,setTimeout(function(){touchback(),gameGoing=!0,clearPlayClock(),resetPlayClock(),updateDownDisplay()},3500))):"away"==poss&&a==fieldColor?(t[n].style.backgroundColor=awayColor,t[rbpos].style.backgroundColor=fieldColor,"G"==s[cellTocoord(rbpos=n).x].innerHTML&&0==pat?(score("a",6,!1),rbpos=1,onScore()):"G"==s[cellTocoord(rbpos).x].innerHTML&&1==pat&&(score("a",2,!1),clearInterval(moveTackles),pat=!1,gameGoing=!1,firstMove=!0,setTimeout(function(){touchback(),gameGoing=!0,clearPlayClock(),resetPlayClock(),updateDownDisplay()},3500))):(0==pat?tackled():(gameGoing=!1,firstMove=!0,clearInterval(moveTackles),document.getElementById("downBox").innerHTML="NO GOOD",setTimeout(function(){touchback(),gameGoing=!0,pat=!1,clearPlayClock(),resetPlayClock(),updateDownDisplay()},2e3)),blink(t[n]))}}function onScore(){gameGoing=!1,gameActive=!1,firstMove=!0,awayDefpos=awayDefenders.slice(0),homeDefpos=homeDefenders.slice(0),clearInterval(moveTackles),clearGameClock(),amountMoved=0,adjustment=0,setTimeout(function(){document.getElementById("message").style.display="block",document.getElementById("messTD").style.display="block"},3e3)}function tackled(){"home"==poss&&0==cellTocoord(rbpos).x?lineofScrimm+=12:"away"==poss&&11==cellTocoord(rbpos).x&&(lineofScrimm-=12),gameActive=!1,gameGoing=!1,firstMove=!0,awayDefpos=awayDefenders.slice(0),homeDefpos=homeDefenders.slice(0),clearInterval(moveTackles),amountMoved=0,gameClock>0&&setTimeout(function(){resetPlay(),4!==down&&resetPlayClock()},1500)}function fieldGoal(){document.getElementById("message").style.display="none",document.getElementById("messFourth").style.display="none";var e=document.getElementById("downBox");e.innerHTML=String(50-Math.abs(lineofScrimm)+17)+" YD ATT";var o=fieldGoalChance(lineofScrimm),t=Math.floor(1e3*Math.random())/10;setTimeout(function(){0==overtime&&((gameClock-=3)<3?(gameClock=0,changePeriod()):safeGameClock()),t<=o?(score("home"==poss?"h":"a",3,!1),setTimeout(function(){touchback(),"home"==poss&&0==overtime?(e.innerHTML=decodeEntities("1st & 10 &#9654;"),e.style.backgroundColor=awayColor):"away"==poss&&0==overtime?(e.innerHTML=decodeEntities("&#9664; 1st & 10"),e.style.backgroundColor=homeColor):"home"==poss&&0==overtime?(e.innerHTML=decodeEntities("1st & 10 &#9654;"),e.style.backgroundColor=awayColor):"away"==poss&&0==overtime&&(e.innerHTML=decodeEntities("&#9664; 1st & 10"),e.style.backgroundColor=homeColor),gameGoing=!0,clearPlayClock(),safePlayClock()},3500)):(e.innerHTML="NO GOOD",setTimeout(function(){"home"==poss?(e.innerHTML=decodeEntities("1st & 10 &#9654;"),e.style.backgroundColor=awayColor):(e.innerHTML=decodeEntities("&#9664; 1st & 10"),e.style.backgroundColor=homeColor),changePoss(lineofScrimm),gameGoing=!0},1e3))},1500)}function punt(){document.getElementById("message").style.display="none",document.getElementById("messFourth").style.display="none";var e=Math.floor(20*Math.random())+35;if("home"==poss)var o=lineofScrimm-e;else o=lineofScrimm+e;o<=-50?o=-30:o>=50&&(o=30),changePoss(o),clearGameClock(),0==overtime&&((gameClock-=3)<3?(gameClock=0,changePeriod()):safeGameClock()),gameGoing=!0,updateDownDisplay()}function changePeriod(){playClock=7,firstMove=!0,document.getElementById("playClock").innerHTML="7",document.getElementById("playClock").classList.remove("redPlay"),clearPlayClock();var e=document.getElementById("period"),o=document.getElementById("downBox");document.getElementById("gameClock").innerHTML="0:00",gameGoing=!1,1!=quarter&&3!=quarter||(o.innerHTML=1==quarter?"END OF Q1":"END OF Q3",setTimeout(function(){quarter++,document.getElementById("gameClock").innerHTML=toMins(gameClock),e.innerHTML=ordinal(quarter),gameClock=periodLength,clearInterval(runPlayClock),resetPlayClock(),4!==down&&safeGameClock(),updateDownDisplay(),resetField(),gameGoing=!0},1e3)),2==quarter&&(o.innerHTML="HALFTIME",document.getElementById("message").style.display="none",4==down&&(document.getElementById("messFourth").style.display="none",gameGoing=!1),setTimeout(function(){quarter++,e.innerHTML=ordinal(quarter),gameClock=periodLength,gameGoing=!0,poss="home",changePoss(-25),safeGameClock(),updateDownDisplay()},2e3)),4==quarter&&(document.getElementById("puntOption").style.display="none",homeScore!==awayScore?finalScore():(document.getElementById("message").style.display="block",document.getElementById("messOvertime").style.display="block")),5==quarter&&(document.getElementById("extraOption").style.display="none",homeScore!==awayScore?finalScore():(document.getElementById("message").style.display="block",document.getElementById("messDoubleOvertime").style.display="block")),6==quarter&&(document.getElementById("fieldOption").style.display="none",homeScore!==awayScore?finalScore():(document.getElementById("message").style.display="block",document.getElementById("messTripleOvertime").style.display="block")),7==quarter&&(homeScore!==awayScore?finalScore():(document.getElementById("message").style.display="block",document.getElementById("messCoinFlip").style.display="block",document.getElementById("coinPrompt").innerHTML=awayName+", what is your call?"))}function flipCoin(e){Math.floor(2*Math.random())==e?awayScore++:homeScore++,document.getElementById("messCoinFlip").style.display="none",finalScore()}function finalScore(){document.getElementById("message").style.display="block",document.getElementById("messWinner").style.display="block";var e=document.getElementsByClassName("finalScore"),o=document.getElementsByClassName("finalName");o[1].style.backgroundColor=homeColor,o[0].style.backgroundColor=awayColor,o[1].innerHTML=homeName,o[0].innerHTML=awayName,e[1].innerHTML=homeScore,e[0].innerHTML=awayScore,homeScore>awayScore?(document.getElementById("winnerMessage").innerHTML="Congrats "+homeName+"!",e[1].style.color="#ffbf27"):(document.getElementById("winnerMessage").innerHTML="Congrats "+awayName+"!",e[0].style.color="#ffbf27")}function resetforFourth(){rbpos="home"==poss?34:1,down=4,gameGoing=!0,updateDownDisplay(),resetField()}function resetPlay(){var e,o;("home"==poss?(e=11-cellTocoord(rbpos).x+adjustment,lineofScrimm-=11-cellTocoord(rbpos).x):(e=cellTocoord(rbpos).x+adjustment,lineofScrimm+=cellTocoord(rbpos).x),adjustment=0,(toGo-=e)<=0)?(toGo=10,down=1,("home"==poss&&lineofScrimm<=-40||"away"==poss&&lineofScrimm>=40)&&(goal=!0,o="home"==poss?-50:50,toGo=Math.abs(o-lineofScrimm))):down++;4==down?(document.getElementById("message").style.display="block",document.getElementById("messFourth").style.display="block",document.getElementById("fgChance").innerHTML="Your chance is: "+fieldGoalChance(lineofScrimm)+"%",clearGameClock(),clearPlayClock()):down>4?(changePoss(lineofScrimm),gameGoing=!0):(document.getElementById("playClock").innerHTML="7",playClock=7,gameGoing=!0,rbpos="home"==poss?34:1),4!==down&&(updateDownDisplay(),resetField())}function changePoss(e){1==overtime&&0==--gameClock&&changePeriod(),toGo=10,down=1,goal=!1;var o=document.getElementById("los"),t=document.getElementById("ltm");"home"==poss?(poss="away",o.style.left="calc((100% / 12 * 1) - 2px)",t.style.left="calc((100% / 12 * 11) - 2px)",rbpos=1):(poss="home",o.style.left="calc((100% / 12 * 11) - 2px)",t.style.left="calc((100% / 12 * 1) - 2px)",rbpos=34),lineofScrimm=e,resetField()}function resetField(){for(var e=document.getElementsByClassName("cell"),o=0;o<e.length;o++)e[o].style.backgroundColor=fieldColor;if("home"==poss){for(var t=0;t<homeDefenders.length;t++)e[awayDefenders[t]].style.backgroundColor=awayColor;e[34].style.backgroundColor=homeColor}else if("away"==poss){for(var l=0;l<homeDefenders.length;l++)e[homeDefenders[l]].style.backgroundColor=homeColor;e[1].style.backgroundColor=awayColor}rbpos="home"==poss?34:1,updateFieldPos()}function startGame(){document.getElementById("initCont").style.display="none";var e=document.getElementById("countdown");e.style.display="block",periodLength=document.getElementById("quarterTime").value,gameClock=periodLength,document.getElementById("gameClock").innerHTML=toMins(gameClock),resetField(),updateDownDisplay();var o=3,t=setInterval(function(){o--,e.innerHTML=o,0==o?e.innerHTML="GO":-1==o&&(safeGameClock(),safePlayClock(),clearInterval(t),gameGoing=!0,e.style.display="none")},1e3)}function updateFieldPos(){var e=lineofScrimm;"home"==poss&&(e-=11);for(var o=document.getElementsByClassName("lineCell"),t=0;t<o.length;t++)o[t].innerHTML=fieldLine(e+t);var l,n=document.getElementById("los"),a=document.getElementById("ltm");0==adjustment?(los.style.display="block",a.style.display="block","home"==poss?(n.style.left="calc((100% / 12 * 11) - 2px)",11-toGo>=1?a.style.left="calc((100% / 12 * "+String(11-toGo)+") - 2px)":a.style.display="none"):(n.style.left="calc((100% / 12) - 2px)",toGo+1<=11?a.style.left="calc((100% / 12 * "+String(toGo+1)+") - 2px)":a.style.display="none")):(n.style.display="none",(l=toGo-adjustment)>0?(a.style.display="block",a.style.left="home"==poss?"calc((100% / 12 * "+String(11-l)+") - 2px)":"calc((100% / 12 * "+String(l+1)+") - 2px)"):a.style.display="none"),"home"==poss&&lineofScrimm>=50?(score("a",2,!0),gameGoing=!1,changePoss(-20),updateDownDisplay(),clearGameClock(),clearPlayClock(),setTimeout(function(){safeGameClock(),safePlayClock(),gameGoing=!0},3e3)):"away"==poss&&lineofScrimm<=-50&&(score("h",2,!0),gameGoing=!1,changePoss(20),updateDownDisplay(),clearGameClock(),clearPlayClock(),setTimeout(function(){safeGameClock(),safePlayClock(),gameGoing=!0},3e3))}function score(e,o,t){var l=document.getElementsByClassName("teamScore");if(1!==o){var n;2==o&&0==t?n="2PT CONVERSION":2==o&&1==t?n="SAFETY":3==o?n="FIELD GOAL":6==o&&(n="TOUCHDOWN");var a=document.getElementById("scoring");a.innerHTML=n,a.style.display="block","h"==e?a.style.backgroundColor=homeColor:"a"==e&&(a.style.backgroundColor=awayColor);var s=0,r=setInterval(function(){a.style.letterSpacing=String(Number(s/2)+1)+"px",20==++s&&("h"==e?(homeScore+=o,l[1].innerHTML=homeScore):"a"==e&&(awayScore+=o,l[0].innerHTML=awayScore)),s>=40&&clearInterval(r)},50);setTimeout(function(){a.style.display="none",a.classList.remove(void 0)},3e3)}else"h"==e?(homeScore++,l[1].innerHTML=homeScore):(awayScore++,l[0].innerHTML=awayScore)}function resetPlayClock(){document.getElementById("playClock").innerHTML="7",playClock=7,safePlayClock()}function runGameClock(){var e=document.getElementById("gameClock");0==overtime&&(updateGameClock=setInterval(function(){--gameClock<=0&&0==gameActive?(changePeriod(),clearGameClock(),gameClock=0):gameClock<=0&&1==gameActive&&(gameClock=0),e.innerHTML=toMins(gameClock)},1e3))}function runPlayClock(){var e=document.getElementById("playClock");e.classList.remove("redPlay"),updatePlayClock=setInterval(function(){gameClock<=0&&clearPlayClock(),--playClock>=0&&(e.innerHTML=playClock),2==playClock&&e.classList.add("redPlay"),0==playClock&&(gameGoing=!1,clearPlayClock(),clearGameClock(),1==audio&&document.getElementById("whistleSound").play(),"home"==poss?lineofScrimm+=5:lineofScrimm-=5,setTimeout(function(){gameGoing=!0,resetPlayClock(),toGo+=5,resetField(),0==pat&&updateDownDisplay()},3e3))},1e3)}function updateDownDisplay(){var e=document.getElementById("downBox"),o=toGo;1==goal&&(o="GOAL"),"home"==poss?(e.innerHTML=decodeEntities(0==controlStyle?"&#9664; "+ordinal(down)+" & "+o:"&#9664;"+ordinal(down)+" & "+o),e.style.backgroundColor=homeColor):(e.innerHTML=decodeEntities(0==controlStyle?ordinal(down)+" & "+o+" &#9654;":ordinal(down)+" & "+o+"&#9654;"),e.style.backgroundColor=awayColor)}function toMins(e){var o=e%60;return o<10&&(o="0"+o),(e-o)/60+":"+o}function cellTocoord(e){var o=e%3;return{x:(e-o)/3,y:o}}function coordTocell(e,o){return 3*e+o}function fieldLine(e){var o=50-Math.abs(e);return e%10==0&&e<0&&e>-50?o=0==controlStyle?"&#9664; "+o:"&#9664;"+o:e%10==0&&e>0&&e<50?o+=0==controlStyle?" &#9654;":"&#9654;":-50==e||50==e?o="G":(e<-50||e>50)&&(o="-"),decodeEntities(o)}function ordinal(e){return 1==e?"1st":2==e?"2nd":3==e?"3rd":4==e?"4th":5==e?"OT":6==e?"2OT":7==e?"3OT":void 0}window.onkeydown=function(e){1==gameGoing&&("away"==poss?(87==e.keyCode&&moveRB(0,-1),83==e.keyCode&&moveRB(0,1),65==e.keyCode&&moveRB(-1,0),68==e.keyCode&&moveRB(1,-0)):(73==e.keyCode&&moveRB(0,-1),75==e.keyCode&&moveRB(0,1),74==e.keyCode&&moveRB(-1,0),76==e.keyCode&&moveRB(1,-0)),84==e.keyCode&&0==gameActive&&0==activeTimeout&&timeout("a"),80==e.keyCode&&0==gameActive&&0==activeTimeout&&timeout("h"))};var decodeEntities=function(){var e=document.createElement("div");return function(o){return o&&"string"==typeof o&&(o=(o=o.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,"")).replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),e.innerHTML=o,o=e.textContent,e.textContent=""),o}}();
